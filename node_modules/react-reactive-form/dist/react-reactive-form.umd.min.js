!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react"),require("prop-types")):"function"==typeof define&&define.amd?define(["exports","react","prop-types"],e):e(t.ReactiveForm={},t.React,t.PropTypes)}(this,function(t,g,e){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var m="default"in g?g.default:g,L=(e=e&&e.hasOwnProperty("default")?e.default:e,"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t}),n=function(t,e,n){return e&&R(t.prototype,e),n&&R(t,n),t};function R(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function r(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t,e){if(t)return!e||"object"!=typeof e&&"function"!=typeof e?t:e;throw new ReferenceError("this hasn't been initialised - super() hasn't been called")}var B=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t)){var n=e,r=[],i=!0,e=!1,o=void 0;try{for(var a,u=t[Symbol.iterator]();!(i=(a=u.next()).done)&&(r.push(a.value),!n||r.length!==n);i=!0);}catch(t){e=!0,o=t}finally{try{!i&&u.return&&u.return()}finally{if(e)throw o}}return r}throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=(n(u,[{key:"subscribe",value:function(t){this.observers.push(t)}},{key:"unsubscribe",value:function(e){this.observers=e?this.observers.filter(function(t){return t!==e?t:null}):[]}},{key:"next",value:function(e,t){var n=t||window;this.observers.forEach(function(t){t.call(n,e)})}}]),u);function u(){i(this,u),this.observers=[]}var _=g.createContext(null);function M(t,e){var n=new a;return t.then(function(t){n.next((t=t,e?e(t):t))},function(t){n.next(t)}).then(null,function(t){throw t}),n}function q(t){return"function"==typeof t}var I=function(){return"undefined"!=typeof window&&window.navigator&&window.navigator.product&&"ReactNative"===window.navigator.product},N=function(t){return!!(t&&t.stopPropagation&&t.preventDefault)},s={ReactNative:{switch:{value:"value",onValueChange:"onChange",onBlur:"onBlur",onFocus:"onFocus",disabled:"disabled"},default:{value:"value",onChange:"onChange",onBlur:"onBlur",onFocus:"onFocus",editable:"enabled"}},default:{value:"value",onChange:"onChange",onBlur:"onBlur",onFocus:"onFocus",disabled:"disabled"}},G=function(t){return null==t?"":t},W=function(t){return I()?s.ReactNative[t]||s.ReactNative.default:s.default};var H=["strict","render","name","index","control","formState","options","parent","meta"];function l(t){return null==t||0===t.length}function $(t){return null!=t}function z(t){t=t.reduce(function(t,e){return null!=e?Object.assign({},t,e):t},{});return 0===Object.keys(t).length?null:t}var Z=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,c=(n(h,null,[{key:"min",value:function(e){return function(t){return!l(t.value)&&!l(e)&&(t=parseFloat(t.value),!isNaN(t)&&t<e)?{min:{min:e,actual:t}}:null}}},{key:"max",value:function(e){return function(t){return!l(t.value)&&!l(e)&&(t=parseFloat(t.value),!isNaN(t)&&e<t)?{max:{max:e,actual:t}}:null}}},{key:"required",value:function(t){return l(t.value)?{required:!0}:null}},{key:"requiredTrue",value:function(t){return!0===t.value?null:{required:!0}}},{key:"email",value:function(t){return l(t.value)||Z.test(t.value)?null:{email:!0}}},{key:"minLength",value:function(e){return function(t){return!l(t.value)&&(t=t.value?t.value.length:0)<e?{minLength:{requiredLength:e,actualLength:t}}:null}}},{key:"maxLength",value:function(e){return function(t){t=t.value?t.value.length:0;return e<t?{maxLength:{requiredLength:e,actualLength:t}}:null}}},{key:"pattern",value:function(t){var e,n;return t?(e=n=void 0,n="string"==typeof t?(e="^"+t+"$",new RegExp(e)):(e=t.toString(),t),function(t){return l(t.value)||n.test(t.value)?null:{pattern:{requiredPattern:e,actualValue:t.value}}}):null}},{key:"compose",value:function(t){var n;return!t||0===(n=t.filter($)).length?null:function(t){return z((e=t,n.map(function(t){return t(e)})));var e}}},{key:"composeAsync",value:function(t){var n;return!t||0===(n=t.filter($)).length?null:function(t){e=t;var e,t=n.map(function(t){return t(e)});return M(Promise.all(t),z)}}}]),h);function h(){i(this,h)}var f="VALID",d="INVALID",v="PENDING",y="DISABLED";function p(t){return null!=t&&!Array.isArray(t)&&"object"===(void 0===t?"undefined":L(t))}function J(e){return e.validate?function(t){return e.validate(t)}:e}function K(e){return e.validate?function(t){return e.validate(t)}:e}function C(t){var e,t=p(t)?t.validators:t;return Array.isArray(t)?null!=(e=t)?c.compose(e.map(J)):null:t||null}function b(t,e){e=p(e)?e.asyncValidators:t;return Array.isArray(e)?null!=(t=e)?c.composeAsync(t.map(K)):null:e||null}n(Q,[{key:"setInitialStatus",value:function(){this.disabled?this.status=y:this.status=f}},{key:"disable",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.status=y,this.errors=null,this._forEachChild(function(t){t.disable({onlySelf:!0})}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.next(this.value),this.statusChanges.next(this.status),this.stateChanges.next()),this._updateAncestors(!!t.onlySelf),this._onDisabledChange.forEach(function(t){return t(!0)})}},{key:"enable",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.status=f,this._forEachChild(function(t){t.enable({onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(!!t.onlySelf),this._onDisabledChange.forEach(function(t){return t(!1)})}},{key:"updateValueAndValidity",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.setInitialStatus(),this._updateValue(),this.enabled&&("submit"!==this.updateOn||this.submitted)&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==f&&this.status!==v||this._runAsyncValidator(!0)),!1!==t.emitEvent&&(this.valueChanges.next(this.value),this.statusChanges.next(this.status),this.stateChanges.next()),this.parent&&!t.onlySelf&&this.parent.updateValueAndValidity(t)}},{key:"markAsTouched",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t),t.emitEvent&&this.stateChanges.next()}},{key:"markAsSubmitted",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.submitted=!0,this._forEachChild(function(t){t.markAsSubmitted()}),!1!==t.emitEvent&&this.stateChanges.next()}},{key:"markAsUnsubmitted",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.submitted=!1,this._forEachChild(function(t){t.markAsUnsubmitted({onlySelf:!0})}),!1!==t.emitEvent&&this.stateChanges.next()}},{key:"markAsPristine",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!0,this._pendingDirty=!1,t.emitEvent&&this.stateChanges.next(),this._forEachChild(function(t){t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}},{key:"markAsUntouched",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.touched=!1,this._pendingTouched=!1,this._forEachChild(function(t){t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t),t.emitEvent&&this.stateChanges.next()}},{key:"markAsDirty",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!1,t.emitEvent&&this.stateChanges.next(),this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}},{key:"markAsPending",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.status=v,this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}},{key:"setValidators",value:function(t){this.validator=C(t)}},{key:"setAsyncValidators",value:function(t){this.asyncValidator=b(t)}},{key:"setErrors",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}},{key:"get",value:function(t){return e=this,n=".",null==(t=t)||(t=t instanceof Array?t:t.split(n))instanceof Array&&0===t.length?null:t.reduce(function(t,e){return t instanceof E?t.controls[e]||null:t instanceof S&&t.at(e)||null},e);var e,n}},{key:"getError",value:function(t,e){e=e?this.get(e):this;return e&&e.errors?e.errors[t]:null}},{key:"hasError",value:function(t,e){return!!this.getError(t,e)}},{key:"clearValidators",value:function(){this.validator=null}},{key:"clearAsyncValidators",value:function(){this.asyncValidator=null}},{key:"setParent",value:function(t){this._parent=t}},{key:"_updateAncestors",value:function(t){this._parent&&!t&&(this._parent.updateValueAndValidity(),this._parent._updatePristine(),this._parent._updateTouched())}},{key:"_anyControlsHaveStatus",value:function(e){return this._anyControls(function(t){return t.status===e})}},{key:"_calculateStatus",value:function(){return this._allControlsDisabled()?y:this.errors?d:this._anyControlsHaveStatus(v)?v:this._anyControlsHaveStatus(d)?d:f}},{key:"_runValidator",value:function(){return this.validator?this.validator(this):null}},{key:"_runAsyncValidator",value:function(e){var t,n=this;this.asyncValidator&&(this.status=v,t=function(t){var e=(e=t)&&"function"==typeof e.then?M(t):t;if((t=e)&&"function"==typeof t.subscribe)return e;throw new Error("Expected validator to return Promise or Observable.")}(this.asyncValidator(this)),this._asyncValidationSubscription=t.subscribe(function(t){return n.setErrors(t,{emitEvent:e})}))}},{key:"_cancelExistingSubscription",value:function(){this._asyncValidationSubscription&&this._asyncValidationSubscription.unsubscribe()}},{key:"_updatePristine",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}},{key:"_updateTouched",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}},{key:"_anyControlsDirty",value:function(){return this._anyControls(function(t){return t.dirty})}},{key:"_anyControlsUnsubmitted",value:function(){return this._anyControls(function(t){return!t.submitted})}},{key:"_anyControlsTouched",value:function(){return this._anyControls(function(t){return t.touched})}},{key:"_updateControlsErrors",value:function(t){this.status=this._calculateStatus(),t&&(this.statusChanges.next(),this.stateChanges.next()),this._parent&&this._parent._updateControlsErrors(t)}},{key:"_initObservables",value:function(){this.valueChanges=new a,this.statusChanges=new a,this.stateChanges=new a}},{key:"_forEachChild",value:function(t){}},{key:"_updateValue",value:function(){}},{key:"_allControlsDisabled",value:function(){}},{key:"_anyControls",value:function(){}},{key:"reset",value:function(t,e){}},{key:"setValue",value:function(){}},{key:"patchValue",value:function(){}},{key:"_registerOnCollectionChange",value:function(t){this._onCollectionChange=t}},{key:"_setUpdateStrategy",value:function(t){p(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}},{key:"updateOn",get:function(){return this._updateOn||(this.parent?this.parent.updateOn:"change")}},{key:"dirty",get:function(){return!this.pristine}},{key:"valid",get:function(){return this.status===f}},{key:"invalid",get:function(){return this.status===d}},{key:"pending",get:function(){return this.status===v}},{key:"parent",get:function(){return this._parent}},{key:"untouched",get:function(){return!this.touched}},{key:"enabled",get:function(){return this.status!==y}},{key:"disabled",get:function(){return this.status===y}},{key:"root",get:function(){for(var t=this;t._parent;)t=t._parent;return t}}]);var k=Q;function Q(t,e){i(this,Q),this.validator=t,this.asyncValidator=e,this.touched=!1,this.submitted=!1,this.pristine=!0,this.meta={},this._pendingChange="change"!==this.updateOn,this._pendingDirty=!1,this._pendingTouched=!1,this._onDisabledChange=[],this.hasError=this.hasError.bind(this),this.getError=this.getError.bind(this),this.reset=this.reset.bind(this),this.get=this.get.bind(this),this.patchValue=this.patchValue.bind(this),this.setValue=this.setValue.bind(this)}r(O,k),n(O,[{key:"setValue",value:function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this.value=this._pendingValue=t,this.updateValueAndValidity(e)}},{key:"patchValue",value:function(t){this.setValue(t,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{})}},{key:"reset",value:function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}},{key:"_anyControls",value:function(t){return!1}},{key:"_allControlsDisabled",value:function(){return this.disabled}},{key:"_isBoxedValue",value:function(t){return"object"===(void 0===t?"undefined":L(t))&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}},{key:"_applyFormState",value:function(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}},{key:"_syncPendingControls",value:function(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange))&&(this.setValue(this._pendingValue),!(this._pendingChange=!1))}},{key:"inactive",get:function(){return!this.active}}]);var V=O;function O(t,e,n){i(this,O);var s=o(this,(O.__proto__||Object.getPrototypeOf(O)).call(this,C(e),b(n,e)));return s.formState=t,s.validatorsOrOpts=e,s._applyFormState(t),s._setUpdateStrategy(e),s._pendingChange=!0,s._pendingDirty=!1,s._pendingTouched=!1,s.active=!1,s.onValueChanges=new a,s.onBlurChanges=new a,s.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),s._initObservables(),s.onChange=function(t){var t=function(t){if(N(t))switch(t.target.type){case"checkbox":return t.target.checked;case"select-multiple":if(t.target.options){for(var e=t.target.options,n=[],r=0,i=e.length;r<i;r++)e[r].selected&&n.push(e[r].value);return n}return t.target.value;default:return I()?t.nativeEvent.text:t.target.value}return t}(t),e=t!==s.value;"change"!==s.updateOn?(s._pendingValue=t,s._pendingChange=!0,e&&!s._pendingDirty&&(s._pendingDirty=!0),s.stateChanges.next()):(e&&!s.dirty&&s.markAsDirty(),s.setValue(t)),s.onValueChanges.next(t)},s.onBlur=function(){var t;s.active=!1,"blur"===s.updateOn?(s._pendingDirty&&!s.dirty&&s.markAsDirty(),s.touched||s.markAsTouched(),s.setValue(s._pendingValue)):"submit"===s.updateOn?s._pendingTouched=!0:(t=!s.touched,s.touched||s.markAsTouched(),t&&s.stateChanges.next()),s.onBlurChanges.next(s._pendingValue)},s.onFocus=function(){s.active=!0,s.stateChanges.next()},s.handler=function(t,e){var n=t,r=e,i=s,o={},a=W(n),u=(Object.keys(a).forEach(function(t){var e=null,e="value"===t?"change"!==i.updateOn?G(i._pendingValue):G(i.value):i[a[t]];o[t]=e}),o);switch(n){case"checkbox":u.checked=!!u.value,u.type=n;break;case"radio":u.checked=u.value===r,u.value=r,u.type=n}return u},s}r(A,k),n(A,[{key:"contains",value:function(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}},{key:"registerControl",value:function(t,e){return this.controls[t]||((this.controls[t]=e).setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}},{key:"addControl",value:function(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"removeControl",value:function(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(function(){}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}},{key:"setControl",value:function(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(function(){}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"setValue",value:function(e){var n=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(e),Object.keys(e).forEach(function(t){n._throwIfControlMissing(t),n.controls[t].setValue(e[t],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r)}},{key:"reset",value:function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild(function(t,e){t.reset(n[e],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r),this.markAsUnsubmitted(),this._updatePristine(r),this._updateTouched(r)}},{key:"patchValue",value:function(e){var n=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};Object.keys(e).forEach(function(t){n.controls[t]&&n.controls[t].patchValue(e[t],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r)}},{key:"getRawValue",value:function(){return this._reduceChildren({},function(t,e,n){return t[n]=e instanceof V?e.value:e.getRawValue(),t})}},{key:"_forEachChild",value:function(e){var n=this;Object.keys(this.controls).forEach(function(t){return e(n.controls[t],t)})}},{key:"_onCollectionChange",value:function(){}},{key:"_anyControls",value:function(n){var r=this,i=!1;return this._forEachChild(function(t,e){i=i||r.contains(e)&&n(t)}),i}},{key:"_updateValue",value:function(){this.value=this._reduceValue()}},{key:"_reduceValue",value:function(){var r=this;return this._reduceChildren({},function(t,e,n){return(e.enabled||r.disabled)&&(t[n]=e.value),t})}},{key:"_reduceErrors",value:function(){var r=this;return this._reduceChildren({},function(t,e,n){return(e.enabled||r.disabled)&&(t[n]=e.errors),t})}},{key:"_reduceChildren",value:function(t,n){var r=t;return this._forEachChild(function(t,e){r=n(r,t,e)}),r}},{key:"_setUpControls",value:function(){var e=this;this._forEachChild(function(t){t.setParent(e),t._registerOnCollectionChange(e._onCollectionChange)})}},{key:"_allControlsDisabled",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=Object.keys(this.controls)[Symbol.iterator]();!(t=(r=i.next()).done);t=!0){var o=r.value;if(this.controls[o].enabled)return!1}}catch(t){e=!0,n=t}finally{try{!t&&i.return&&i.return()}finally{if(e)throw n}}return 0<Object.keys(this.controls).length||this.disabled}},{key:"_checkAllValuesPresent",value:function(n){this._forEachChild(function(t,e){if(void 0===n[e])throw new Error("Must supply a value for form control with name: '"+e+"'.")})}},{key:"_throwIfControlMissing",value:function(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet.\n      ");if(!this.controls[t])throw new Error("Cannot find form control with name: "+t+".")}},{key:"_syncPendingControls",value:function(){var t=this._reduceChildren(!1,function(t,e){return!!e._syncPendingControls()||t});return t&&this.updateValueAndValidity(),t}}]);var E=A;function A(t,e,n){i(this,A);var r=o(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,C(e),b(n,e)));return r.controls=t,r.validatorOrOpts=e,r._initObservables(),r._setUpdateStrategy(e),r._setUpControls(),r.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),r.handleSubmit=function(t){t&&t.preventDefault(),r._anyControlsUnsubmitted()&&r.markAsSubmitted({emitEvent:!1}),r._syncPendingControls()||r.updateValueAndValidity()},r}r(w,k),n(w,[{key:"at",value:function(t){return this.controls[t]}},{key:"push",value:function(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"insert",value:function(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"removeAt",value:function(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(function(){}),this.controls.splice(t,1),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"setControl",value:function(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(function(){}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}},{key:"setValue",value:function(t){var n=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this._checkAllValuesPresent(t),t.forEach(function(t,e){n._throwIfControlMissing(e),n.at(e).setValue(t,{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r)}},{key:"patchValue",value:function(t){var n=this,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};t.forEach(function(t,e){n.at(e)&&n.at(e).patchValue(t,{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r)}},{key:"reset",value:function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};this._forEachChild(function(t,e){t.reset(n[e],{onlySelf:!0,emitEvent:r.emitEvent})}),this.updateValueAndValidity(r),this.markAsUnsubmitted(),this._updatePristine(r),this._updateTouched(r)}},{key:"getRawValue",value:function(){return this.controls.map(function(t){return t instanceof V?t.value:t.getRawValue()})}},{key:"_syncPendingControls",value:function(){var t=this.controls.reduce(function(t,e){return!!e._syncPendingControls()||t},!1);return t&&this.updateValueAndValidity(),t}},{key:"_throwIfControlMissing",value:function(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet.\n      ");if(!this.at(t))throw new Error("Cannot find form control at index "+t)}},{key:"_forEachChild",value:function(n){this.controls.forEach(function(t,e){n(t,e)})}},{key:"_updateValue",value:function(){var e=this;this.value=this.controls.filter(function(t){return t.enabled||e.disabled}).map(function(t){return t.value})}},{key:"_anyControls",value:function(e){return this.controls.some(function(t){return t.enabled&&e(t)})}},{key:"_setUpControls",value:function(){var e=this;this._forEachChild(function(t){return e._registerControl(t)})}},{key:"_checkAllValuesPresent",value:function(n){this._forEachChild(function(t,e){if(void 0===n[e])throw new Error("Must supply a value for form control at index: "+e+".")})}},{key:"_allControlsDisabled",value:function(){var t=!0,e=!1,n=void 0;try{for(var r,i=this.controls[Symbol.iterator]();!(t=(r=i.next()).done);t=!0)if(r.value.enabled)return!1}catch(t){e=!0,n=t}finally{try{!t&&i.return&&i.return()}finally{if(e)throw n}}return 0<this.controls.length||this.disabled}},{key:"_registerControl",value:function(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}},{key:"_onCollectionChange",value:function(){}},{key:"length",get:function(){return this.controls.length}}]);var S=w;function w(t,e,n){i(this,w);var r=o(this,(w.__proto__||Object.getPrototypeOf(w)).call(this,C(e),b(n,e)));return r.controls=t,r.validatorOrOpts=e,r._initObservables(),r._setUpdateStrategy(e),r._setUpControls(),r.updateValueAndValidity({onlySelf:!0,emitEvent:!1}),r.handleSubmit=function(t){t&&t.preventDefault(),r._anyControlsUnsubmitted()&&r.markAsSubmitted({emitEvent:!1}),r._syncPendingControls()||r.updateValueAndValidity()},r}function X(t){var e,n,r,i;return t instanceof V||t instanceof E||t instanceof S?t:Array.isArray(t)?(e=t[0],n=1<t.length?t[1]:null,r=2<t.length?t[2]:null,i=3<t.length?t[3]:null,Y.control(e,n,r,i)):Y.control(t)}n(tt,null,[{key:"group",value:function(t,e){n=t,r={},Object.keys(n).forEach(function(t){r[t]=X(n[t])});var n,r,t=r,i=null!=e?e.validators:null,o=null!=e?e.asyncValidators:null,e=null!=e?e.updateOn:null;return new E(t,{validators:i,asyncValidators:o,updateOn:e})}},{key:"array",value:function(t,e){var t=t.map(X),n=null!=e?e.validators:null,r=null!=e?e.asyncValidators:null,e=null!=e?e.updateOn:null;return new S(t,{validators:n,asyncValidators:r,updateOn:e})}},{key:"control",value:function(t,e,n,r){return new V(t,{validators:e,asyncValidators:n,updateOn:r})}}]);var Y=tt;function tt(){i(this,tt)}k=m.Component,r(P,k),n(P,[{key:"componentDidMount",value:function(){var t=this.props.control;this.addListener(t)}},{key:"componentDidUpdate",value:function(t){var e=this.props.control;e!==t.control&&(this.removeListener(e),this.addListener(e))}},{key:"addListener",value:function(t){var e=this;t&&t.stateChanges.subscribe(function(){e.forceUpdate()})}},{key:"removeListener",value:function(e){e&&e.stateChanges.observers&&e.stateChanges.observers.forEach(function(t){e.stateChanges.unsubscribe(t)})}},{key:"componentWillUnmount",value:function(){var t=this.props.control;this.removeListener(t)}},{key:"shouldComponentUpdate",value:function(t){return!t.strict}},{key:"getComponent",value:function(){var t=this.props,e=t.render,n=t.children,t=t.control;return t?q(n)?n(t):q(e)?e(t):null:null}},{key:"render",value:function(){return this.getComponent()}}]);var x=P;function P(){return i(this,P),o(this,(P.__proto__||Object.getPrototypeOf(P)).apply(this,arguments))}x.defaultProps={strict:!0},x.propTypes={strict:e.bool,control:e.oneOfType([e.instanceOf(V),e.instanceOf(S),e.instanceOf(E)]).isRequired,render:e.func};function T(t,e,n){var r=t.name,i=t.parent,o=t.options,a=t.index,u=t.control,s=t.formState,t=t.meta,i=i||e,e=null;return u?("FormGroup"===n&&u instanceof E||"FormArray"===n&&u instanceof S||"FormControl"===n&&u instanceof V)&&(e=u):r?i&&i instanceof E&&(i.get(r)||i.addControl(r,et(n,o,s)),e=i.get(r)):i instanceof S?(u=void 0!==a?a:i.controls.length,i.insert(u,et(n,o,s)),e=i.at(u)):"FormGroup"!==n&&"FormArray"!==n||(e=et(n,o,s)),e&&t&&(e.meta=t),e}function F(t){var e=t.strict,n=t.children,r=t.render,i=g.useContext(_),t=T(t,i,"FormGroup");return m.createElement(_.Provider,{value:t},m.createElement(x,{control:t,strict:e,render:r||n||null}))}var et=function(t,e,n){switch(t){case"FormGroup":return new E({},e);case"FormArray":return new S([],e);case"FormControl":return new V(n,e);default:return null}};F.defaultProps={strict:!0},F.propTypes={strict:e.bool,render:e.func,name:e.string,index:e.number,control:e.instanceOf(E),options:e.shape({validators:e.oneOfType([e.func,e.arrayOf(e.func)]),asyncValidators:e.oneOfType([e.func,e.arrayOf(e.func)]),updateOn:e.oneOf(["change","blur","submit"])}),parent:e.oneOfType([e.instanceOf(S),e.instanceOf(E)]),meta:e.object};function j(t){var e,n,r=t.strict,i=t.children,o=t.render,a=t.name,u=t.parent,s=t.options,l=t.index,c=t.control,h=t.formState,f=t.meta,d=g.useContext(_),t=g.useState(T(t,d,"FormControl")),v=(t=B(t,2))[0],y=t[1],t={control:v,strict:r,render:o||i||null},p=(e=a,n=g.useRef(),g.useEffect(function(){n.current=e}),n.current);return g.useEffect(function(){a!==p&&y(T({name:a,parent:u,options:s,index:l,control:c,formState:h,meta:f},d,"FormControl"))},[a,u,s,l,c,h,f,d]),m.createElement(x,t)}function D(t){var e=t.strict,n=t.children,r=t.render,i=g.useContext(_),t=T(t,i,"FormArray");return m.createElement(_.Provider,{value:t},m.createElement(x,{control:t,strict:e,render:r||n||null}))}j.defaultProps={strict:!0},j.propTypes={strict:e.bool,render:e.func,name:e.string,index:e.number,control:e.instanceOf(V),formState:e.oneOfType([e.shape({value:e.any,disabled:e.bool}),e.any]),options:e.shape({validators:e.oneOfType([e.func,e.arrayOf(e.func)]),asyncValidators:e.oneOfType([e.func,e.arrayOf(e.func)]),updateOn:e.oneOf(["change","blur","submit"])}),parent:e.oneOfType([e.instanceOf(S),e.instanceOf(E)]),meta:e.object};D.defaultProps={strict:!0},D.propTypes={strict:e.bool,render:e.func,name:e.string,index:e.number,control:e.instanceOf(S),options:e.shape({validators:e.oneOfType([e.func,e.arrayOf(e.func)]),asyncValidators:e.oneOfType([e.func,e.arrayOf(e.func)]),updateOn:e.oneOf(["change","blur","submit"])}),parent:e.oneOfType([e.instanceOf(S),e.instanceOf(E)]),meta:e.object};var nt="$field_",k=(k=m.Component,r(U,k),n(U,[{key:"componentDidMount",value:function(){this.props.onMount(this.form)}},{key:"componentDidUpdate",value:function(){this.props.onMount(this.form)}},{key:"shouldComponentUpdate",value:function(t){return t.fieldConfig!==this.props.fieldConfig}},{key:"componentWillUnmount",value:function(){(0,this.props.onUnmount)()}},{key:"configureForm",value:function(){var t=this.props.fieldConfig;this.form=T(t,{},0<arguments.length&&void 0!==arguments[0]?arguments[0]:"FormGroup")}},{key:"setControl",value:function(e,n){var r,i,o=this,t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,a=(i={},(r=e)&&Object.keys(r).forEach(function(t){-1<H.indexOf(t)&&(i[t]=r[t])}),i);return a.key=n,t&&(a.name=t),t&&t.startsWith(nt)||"string"==typeof e.index&&e.index.startsWith(nt)?!1===e.isStatic?m.createElement(x,Object.assign({},{control:this.form},a)):a.render():e.controls?e.controls instanceof Array?(this.form||(this.configureForm("FormArray"),a.control=this.form),m.createElement(D,Object.assign({},a,{render:function(){return e.controls.map(function(t,e){return o.setControl(t,n+"_"+e)})}}))):e.controls instanceof Object?(this.form||(this.configureForm(),a.control=this.form),m.createElement(F,Object.assign({},a,{render:function(){return Object.keys(e.controls).map(function(t){return o.setControl(e.controls[t],t,t)})}}))):null:m.createElement(j,a)}},{key:"generateFields",value:function(){this.form=null;var t=this.props.fieldConfig;return t.controls?this.setControl(t,"my_form"+"_"+(new Date).getTime()):null}},{key:"render",value:function(){return this.props.fieldConfig?this.generateFields():null}}]),U);function U(t){i(this,U);t=o(this,(U.__proto__||Object.getPrototypeOf(U)).call(this,t));return t.form=null,t}k.propTypes={fieldConfig:e.shape({controls:e.oneOfType([e.object,e.array]).isRequired,strict:e.bool,render:e.func,name:e.string,index:e.number,control:e.oneOfType([e.instanceOf(S),e.instanceOf(E)]),options:e.shape({validators:e.oneOfType([e.func,e.arrayOf(e.func)]),asyncValidators:e.oneOfType([e.func,e.arrayOf(e.func)]),updateOn:e.oneOf(["change","blur","submit"])}),parent:e.oneOfType([e.instanceOf(S),e.instanceOf(E)]),meta:e.object}).isRequired,onMount:e.func,onUnmount:e.func},k.defaultProps={onMount:function(){return null},onUnmount:function(){return null}},t.FormBuilder=Y,t.FormGroup=E,t.FormControl=V,t.FormArray=S,t.Validators=c,t.Field=x,t.FieldGroup=F,t.FieldControl=j,t.FieldArray=D,t.FormGenerator=k,Object.defineProperty(t,"__esModule",{value:!0})});
//# sourceMappingURL=react-reactive-form.umd.min.js.map
